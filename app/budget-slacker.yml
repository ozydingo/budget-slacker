imports:
- path: templates/budget_slacker_function.jinja
- path: templates/pubsub_topic.jinja
resources:
- name: handle-slack-interaction
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: app/functions/handle_slack_interaction
    public: true
- name: slack-pubsub
  type: templates/pubsub_topic.jinja
- name: handle-slack
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: app/functions/handle_slack
    public: true
    environmentVariables:
      pubsub_topic: $(ref.slack-pubsub.name)
- name: handle-pubsub-message
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: app/functions/handle_pubsub_message
    trigger:
      eventTrigger: slack-pubsub
    environmentVariables:
      addExpenseUrl: $(ref.add-expense.url)
      teamsUrl: $(ref.teams.url)
      getTotalsUrl: $(ref.get-totals.url)
      requestOauthUrl: $(ref.request-oauth.url)
- name: teams
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: app/functions/teams
- name: get-totals
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: app/functions/get_totals
- name: add-expense
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: app/functions/add_expense
- name: request-oauth
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: app/functions/request_oauth
    public: true
    environmentVariables:
      appCredentialsSecret: projects/526411321629/secrets/sheets-api-credentials/versions/2
      storeOauthUrl: $(ref.store-oauth.url)
- name: store-oauth
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: app/functions/store_oauth
    public: true
    environmentVariables:
      appCredentialsSecret: projects/526411321629/secrets/sheets-api-credentials/versions/2
      teamsUrl: $(ref.teams.url)
outputs:
- name: handle-slack-url
  value: $(ref.handle-slack.url)
- name: handle-slack-interaction-url
  value: $(ref.handle-slack-interaction.url)
