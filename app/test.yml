imports:
- path: cloud_function.py
- path: get_team_info/index.js
- path: get_team_info/package.json

resources:
- name: get-team-info
  type: cloud_function.py
  properties:
    codeLocation: get_team_info
    codeBucket: budget-slacker-deploy
    codeBucketObject: get_team_info.zip
    location: us-east1
    timeout: 60s
    runtime: nodejs8
    availableMemoryMb: 256
    entryPoint: main
    trigger:
      httpsTrigger: {}
- name: get-team-info-policy
  action: gcp-types/cloudfunctions-v1:cloudfunctions.projects.locations.functions.setIamPolicy
  properties:
    resource: $(ref.get-team-info.name)
    policy:
      bindings:
        - members:
          - serviceAccount:budget-slacker@appspot.gserviceaccount.com
          role: "roles/cloudfunctions.invoker"
outputs:
- name: get-team-info-name
  value: $(ref.get-team-info.name)
- name: get-team-info-url
  value: $(ref.get-team-info.url)
