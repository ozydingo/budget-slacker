imports:
- path: templates/cloud_function.py
- path: templates/budget_slacker_function.jinja
- path: templates/pubsub_topic.jinja
- path: functions/add_expense/index.js
- path: functions/add_expense/package.json
- path: functions/get_team_info/index.js
- path: functions/get_team_info/package.json
- path: functions/get_totals/index.js
- path: functions/get_totals/package.json
- path: functions/handle_pubsub_message/index.js
- path: functions/handle_pubsub_message/invoke_function.js
- path: functions/handle_pubsub_message/package.json
- path: functions/handle_pubsub_message/responses.js
- path: functions/handle_slack/index.js
- path: functions/handle_slack/package.json
resources:
- name: slack-pubsub
  type: templates/pubsub_topic.jinja
- name: handle-slack
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: functions/handle_slack
    environmentVariables:
      pubsub_topic: $(ref.slack-pubsub.name)
    public: true
- name: handle-pubsub-message
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: functions/handle_pubsub_message
    trigger:
      eventTrigger: slack-pubsub
    environmentVariables:
      addExpenseUrl: $(ref.add-expense.url)
      getTeamInfoUrl: $(ref.get-team-info.url)
      getTotalsUrl: $(ref.get-totals.url)
- name: get-team-info
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: functions/get_team_info
- name: get-totals
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: functions/get_totals
- name: add-expense
  type: templates/budget_slacker_function.jinja
  properties:
    codeLocation: functions/add_expense
outputs:
- name: handle-slack-url
  value: $(ref.handle-slack.url)
